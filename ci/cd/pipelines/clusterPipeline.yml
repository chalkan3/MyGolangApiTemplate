resource_types:
- name: helm
  type: docker-image
  source:
    repository: linkyard/concourse-helm-resource

resources:
- name: helm-deploy
  type: helm
  source:
    cluster_url: https://172.25.0.2:6443
    cluster_ca: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJd01UQXdPREl5TVRFMU9Gb1hEVE13TVRBd05qSXlNVEUxT0Zvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBT0JrCjFiNzNhNlRma3lPLzJ3MVBlVkZOMmdOejg4QTNuVDg1WVJRNjRJUHdLdjVld3NPS1JjTlh4bjZTKzEzZmk2Vk4KRm5nbjBtRkxyNkxqblM1eWxSNWpJd2ZMaytGSGp0eWZkWkRSdkxUK24rVVZKV1h6RU53NXdtUmVYa245NmtnbAozcnRvNHgyT0s3akRHNjRsWE9aUXNONHVCMG1QN3hhVnFVK1FFTXNBS002QVUxeFdqdHJSODIxb3Rram9GUlF1CmttRlBTMFppYnFXYW9panQzYkZjZ2JRRTVKUHpIb2Y1aGNUN0txOVFaVGxBaFgwOHdpZXk2QVN3YjlnYkRYaWMKck9PKzRLQmxpaFJJYmJKK2tMank2Z1Y0bDFYQ1pOYmJlTUgxSDBZTlRaWW1YdUZubjA5VmdWdEZYNFpJd0dHYwoyWHJybHJoZTVESjRzcE1ub0hjQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZBY2p1YkdGNzNFUkM4c1ZZU3NaN3RsYjhOaTJNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFCaEhNYjk0aDlNN1FsNkVseEd5RVlxRHZMWW5MTk9vOVlNK3c2c3Y3WlJpYU9jeEdaUQpOblJyVmRWTnFRcitTVGJZNzVvWEI2VFBtZytuNmNZanZvTUVrWHcydlM3Qjhsa1JzdTBwZHhxdXg1NUhpQVdXCmlOQTU2d3RzU0oyMVBXS1NudXNSMXlablBKZHNTRHVVWE5MdnVncXZncnMwdHZMQXBSVzhncGhBSkZJenpvZnYKd0JtOXVza0NMdDk2ejNpc1RJeWNDYU9Jd21yNWJ3c1VmWDBseHBxMWRKK0p6QlJ1MlBEaG1uUVRCV0ZGemg1YwpDTEE3SkErWFdDaGtScElYVkNrZ0IvNUpuQ2NzTGhKWXJlUm9NMjhxSUFNNkE5MGxDUkRHU0ZiQUkzVXcyQ0NMCnRvZE5ZMFpxQjJFdWRGMG1zUXk5d29oV0t6TzY2NXNVaUt0TAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    admin_key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBeXdLdjRGV1ZZTmlMRklRVmliUEdXcTRTSTcyeHJoL3lPUnJad3ladTJwMGhtb09LCjU3bjNxZGhGSVY5VDh0WE1wenhONjRFZjIzcG95UHZoOXpMbDkzaW9wMHRESmdGb2t6c05kUjh1YUxHOVV4TVgKVVBPL1NKQ3g1Njdscklra2NVb2tidm55S1NieHJ5NTBpUENMbmpFUVptcXNlT3cyeDJtL2JlWUlBNW9IT1pkRQpBZzFlTy9JRmJpL0JiOFpSM3F5Tkw3VEFERnNmdGUxOUxaWkd5S2dsNkR4aUVTdlU3TS9Kd3BXWCsvSGl0N09DClYvbDZ2TUp3TEU1NTRGank0UlU1Z1R2OHJSM0htbVRHc3QvWWswR3pRYVZVdU9GWHIxeFNHbi9jTVVmTzB2NVAKMi9veWVOY3BuUjd4NmN2WUxPYmwyT0VKVlpuczlhd1dGa3NlV3dJREFRQUJBb0lCQUc2ODMzMUtrZnBMQk1yRApKaENBVFJISDVFTTB4WWhMQ3RFVmtYVy9NRGIyQVkrTWM2ZmxySEFzZGNFM2c4NXh5M25xRGtNSm8zd1FjTG81Cms5QkpKbUp3b2VibnloQWdNcEFsWlRqZk1teVBqOHVTSFdUZUlSaVBQVXc0L2pXNGRYV0swUWJzTnFrMkFoM2kKQkZWeWlXWllNeTc2djJ3U3hlclBCMG9HY1phc1pNWm5GVDNMUzlDWkhkNDFwQms4OXY5cXExazZiOVYrcGl6NgpXQk5JNFZrY0MrblJBdnVSQ2ZsWnhPSXpXRVJKOU5tb29NaUZCcnZJQjVudDBaWTI0ZVZCaWpkdzZnUTVsc2NyCm5WWmIzQjJ3MGpyNVNTaExYRHBiamVJZHF1djdwUHNXR0lFRE93M2VjZnRyWXhBeEQzVHd5VThwbHZ4VFpmaFMKWHh3NHdqa0NnWUVBNkIvVWgxNWxPWDlJNFMxMWhiNklQWlNLMDRvdlduSGJqYTQzUUVzc3FiUjR6NTc5b2ViTQo0RXZuMlp4aFgrWFRoZHZnZFl2UEFPelYyT0VkRFFMb3RNQU5MRUh2L0l5RWdOc25OSzVNb3Q5RkhLSnNKVHg1CklnaE1MRG80cVE0T1VmNzdlSFZaOU5VOEdLUFF0UUJXUEp0dW15Y0d4b2s0aHlwakJSSlRyalVDZ1lFQTMrUS8KVEcwNm84S2VndVFMc0JNTi81TytFUkc3cTRLVHRhcUhXTktDR1kxVzkxRkFiMWVGYUEvTDZrNVkzYTVQZ2dqTwpmK09CVHd4QUh5eTc4ZGhpOVVzSTlUTmJ4ZUszUW5XVVNYU0xLL1AwNll4YmhaQ045WGFLbTI4ZllsVFROTzBVCjAySDh5L2JLdlFoNkt0NkFpNHlLbGlFbWNqZ29sRytacFlSU2JFOENnWUJ5NWc2VlV5eFg0YUY1bEw3dmpQaHoKUXV2VStqbW1VMldTSkFKRldQQ3FzQ0o4NHY0NC9iMjc2TmJDNkoxcWtxQzVTYlU1ZWhMbEtsWlFIRjM4NnN1MQpiTHNZaFNyOW43Q1c5K1BZTjg3SGNDME5sM2hnbGlaL3FndktlS2REUnluZmZJK05lTWttWDhaM2k5N3JPVmQyCmVKbXZRd29makJ6bkN4d29qb0hOWVFLQmdCKzVNWmJjcTBCazVSemF2eVUxcmZnV3NRbXVINDlQc3lvOGZXMEMKZHRpMEJDeUs0THhtQkVzWVllWlRMNWhKaUk1K1BQUTJBaTUzSitiQzZlWjhxSmpsQnVIbll3dUk4anFDZW41bAord3BCU09TR3RMa2FJR00xWnJKYmJuRDZYK3JSNU8rR3BORXBxTlJjRFNOaDM0am1Zd1Nlc2RuaFJ5NnhHVzR3CmI1VlZBb0dCQUlhWUU0OUpJSlU3TTBsWFBMWER0SERsYUlTSDJrbUcxNEpvTnh0QnNMVEhkZkxncGVGSGlWYWkKWEpTQ2VDcGlFTDg0UE1OWnpEZ0dWdW5nMkJuRkxYejU3WEd3ODVJb005aUxmVGE0N0c5dWdFU2tDNFpJS21HVgpSMmxkTnk1WU5VMFZkTlpYQW04WTlFV29PMWFsMWcvamdKdE1POWdaTGlDTDlxdmowTEI1Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
    admin_cert: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURFekNDQWZ1Z0F3SUJBZ0lJYmdTblFhaDcrSzh3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TURFd01EZ3lNakV4TlRoYUZ3MHlNVEV3TURneU1qRXlNREJhTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXl3S3Y0RldWWU5pTEZJUVYKaWJQR1dxNFNJNzJ4cmgveU9Sclp3eVp1MnAwaG1vT0s1N24zcWRoRklWOVQ4dFhNcHp4TjY0RWYyM3BveVB2aAo5ekxsOTNpb3AwdERKZ0Zva3pzTmRSOHVhTEc5VXhNWFVQTy9TSkN4NTY3bHJJa2tjVW9rYnZueUtTYnhyeTUwCmlQQ0xuakVRWm1xc2VPdzJ4Mm0vYmVZSUE1b0hPWmRFQWcxZU8vSUZiaS9CYjhaUjNxeU5MN1RBREZzZnRlMTkKTFpaR3lLZ2w2RHhpRVN2VTdNL0p3cFdYKy9IaXQ3T0NWL2w2dk1Kd0xFNTU0Rmp5NFJVNWdUdjhyUjNIbW1URwpzdC9ZazBHelFhVlV1T0ZYcjF4U0duL2NNVWZPMHY1UDIvb3llTmNwblI3eDZjdllMT2JsMk9FSlZabnM5YXdXCkZrc2VXd0lEQVFBQm8wZ3dSakFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0h3WURWUjBqQkJnd0ZvQVVCeU81c1lYdmNSRUx5eFZoS3hudTJWdncyTFl3RFFZSktvWklodmNOQVFFTApCUUFEZ2dFQkFOU1FVU1BzTE5DZzlVMThTaTZuV0xwZ1pXNXBCRHJRZEhHN3U0b2wwbFd2OXYyV0hUYlVwUzNsCnFLN1R0NVR3aUU2UkZ0ZVcrNTN1akpQaHhCa0VJN3BWcitiUnVFYnpUU3J5SVN5aTRPUCtTUkI0UHAzVk5MbVEKOEtSRjhzaS9iQVprWHdBcE9PVDlnRHFlMlhLd1hXa3RzWHlVQndlc0t1TU1KWXc5cE9ZSU9GOHpWcFAzRXEwMgpzelNKYW1jZm43WFBmalhBTXdhL2JtS3g3aHRTZ3I1NE9jVFZ2RXJxU0QzdVBKQUhxN3kzNUwrOVorMG9ocDV5CkdmVW5XOWRETGI0Z0c5bFdlVDhySXFtS0ltUUM4L2wzOEJaMDdnOWlJcWtrZjhiRXZVbVJFYzFMSHNtSkdybjkKaEUvaUhta0F1c2RxZnN2L25FZlQ5eStCQkZtQlFJWT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
    namespace: whatsapp-shared
    tillerless: true
    tillerless_silent: true
    repos:
      - name: bitnami
        url: https://charts.bitnami.com/bitnami
        
jobs:
- name: deploy-rabbitmq
  plan:
  - put: helm 
    params:
      release: rabbitmq
      namespace: whatsapp-shared
      chart: bitnami/rabbitmq
      override_values:
      - key: replicas
        value: 1
      - key: username
        value: rabbitmqadmin
  - put: helm
    params:
      release: mysql
      


