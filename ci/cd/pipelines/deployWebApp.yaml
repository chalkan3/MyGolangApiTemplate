resource_types:
- name: helm
  type: docker-image
  source:
    repository: linkyard/concourse-helm-resource

resources:
- name: helm
  type: helm
  source:
    cluster_url: https://172.25.0.2:6443
    cluster_ca: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJd01UQXdPVEV6TURRek4xb1hEVE13TVRBd056RXpNRFF6TjFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBS1Y0CmhFN1k5aFdYeW9zRzBteWFlZm1BUWZ6VUZMVXZWWFd0b2QrYnlYaVQ1cXJWVE96ZW05dXFiSDhOcWtEd2YvbXMKalZUWmN0bE92STNrU3VWK2pmdEJlT3Q0aUhlM3dxQnNnWmZWTmZVQlZqaFkyL1c3NWJYaFIxSk45NndHVFlkTwpKQmpHZVZNSDNMRS91SUk1cTRPcUhPbjR3OUN0NEE4cys0aUNhdnNCRFEyTVZacURRY1JnRFF5Tm9wNE54ZkkxCjJCNHMvU1RKVDFyRGJCOFNWSHh5Vkkxdk1UQjc4UVJWcDVhVHY0aEIvVGZrVE1SNXEyRmhabHQ5L1cvRkJGOWkKemtGbm54NXNyTDFyMWFMZTBXSmU3ekRabE5FV0M2S1VDNEtYTnJ3eUZCOFEvTHBpL3JIaWtBU3ByOEFZQmViNApVWlpiakVINmc2eTB2UXJsSHdVQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZHTGJFLzN1QWhkY1UvMlFjOVdFbWJzaFJ2Z29NQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFCTGJhR3QzTEhQaEFpVXB2cjM5UWFyTEZaV0hFdXhrMGZsREREanBIdnJHSlcyT0haWAorcHczTUpiUDJlMEI5QUUyWFFWcHZaaFFQMy83RzlnTmh2SDZpZXNiTTVDNlVKZ0daampoMWJJdGd5NGhwbWMzCmlYK3JldUxaVlhhSkp5cjBJcXlrRkttZnYwdzE0ZTNJYnFMYlZzNzZ0d3l4S1hqLzMzSWt6Ni9idVl1UG9mYm8Kd0twNVVZcVE5N0JETkxzTTFadTE2Z3p3WGZ5NDV3cjdtSG8zZFM0anlyMDk4YWkxMHZQdFRCeGJidG9BQUZTWAovRVNVTGxWcENmY0ZvMWU0UW1SQ2g2d1ZoMVZudTJWcXBvMnFjdFNuVWFiN2YyTWcxWXoxSW53blJ2ZmpQMU8zCm5NTEFPdVBwQnVNNnYwbVlCTzFyMm5IN09ZWXJIMTVSRjRSVgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    admin_key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBcHZlVzAzWWZRMEJ6aXZjK0ZuakV3Tk9xWVhoWG9rWmRMVHNRcy9KcnRwT2FIYUFZCnorZDAyRm1ZMStCMmlzNkh5c0pwOHV1b0tJMkVnemE1dUljeWt4QmloaUxhNG9GdFREMjhSZ2FMN1BYRDJydmoKWmkwdXBrMUoydEkvRmE2VkZpdVY2UUwzcEl3dkNlSGhhcklKV2lXWGtEZjNVaENkTGtNS1VKWGxmempPYXI3MAo3M2FMUWlOaDh4cHkwbDhtZHRWK1hNSHFtbERjdDBFTFRXSVF4SXA4MUFkS1poK0RuYmpaTHB5TFFJNGg3RUU3CmdGY1RWNzc3Z29seUV2L09mdjYvS0JoODRNbXlMM2haRkt3K0NKRVdRZEFGK0F2NGRFWi9tNUJEaWdBTldCL2UKOS9nNTJmeUZjV2ZSbEQwdXZTT2haMlUzbi94aU1mRGxhcTNkS3dJREFRQUJBb0lCQUJ6R0Fpb0M2elJOd1J1cgpxL2wzYW9ESWVVNCt6T3RjTU9hQWpVcFZkcGFLTFQ3NXZnem1HRTdJY2Z5UjVCdmJwNjhiZmVLdEZkZVhPOFRaCkEzeDNZQkhUK3dhZXJ4WGx0QTQxZldLYjhqVXR6VWkrcEZ1UlliNnJCeFU4c2o1c1RhajZiZVV2NjdsaHB5R08KMmFmbmNwRWtkVkFYTlBuaGZ4VGYzTUV5YzlCT2xIMThNVnBQY091Qkp4NHdocm5mVkplUEd2Q0gvOFFreWhYdQp5ZldYZjFxME1mZ2wyVXZSdHBtYXdzdHAvQkIweWpNY3dnZW5WVlFqRGNXdnpGWW9odHc4eHE4aG40c0E1TEhZCnVzY1NqWWE0MVVxSHN1ejdTTVZ2cmFvUE5wQXFmNGJrZDBaK0V2SWdYTVFVbUtOMUJ6b1dzd2g3NCtEbk54eWkKL1RSUFV0RUNnWUVBeFRBbmZhTDdFLzJ4ZUN3VU80SzZ1djJxaWw3Y0M3TnhLYndwOWh3dDRmeGEzSVQvZTgyTwozMkJrYUJSci9zamw1aFUrZzdONXNZODVObHRNWTRSVGkwcm1zS2NNSEVIcjdIRTZrSUxTVG43Q3ZHOTQ0TWtrCis0MUVwQnl0WithZUlnTFplU1p1Mng2YzFENlM2US9rV09kUUV6TVRQMFlhZ0dKS1V0WUFWVjhDZ1lFQTJNUDcKb24yUGtQTkFIMkI4dmtMRUpKaXVnQ0IzWXE4WnhEeVQ0Nkk3dTJjaTluc0NKeVB4amtTa29OVzN5cENTUnY2RgpIaEJobVRGMkxXZDhlblBvQ09NTG5VTXBKaXZNbVFiNFJjbERyNWEzMGRXc05DeGIzVEtkSldWTVNrL21IcDZVCmRXL2JaRUlUZ3R0ODVpaU51VzVVdXoxR2ZoRmVhZWdWVTZERkg3VUNnWUVBcnM0N2xBTVJ0ZTBta0xQeTA3YlcKdHNIOWwyRDBqV0xzSk9Wc0JZT0JvVjdIWmNwNWVsVUdIVHdraHFmai9TQTN2anFEQ3RubVBlUU1BZ1g1dUJjcwp3TVVMc1ByRm41OUkrSGlBUkcvVTVFVTNlVGtRM2FVekpkVmNUbWdseVlBR0czeVBNZmxDT1Bud2FhOTNLU2t2CmN5ak1NZGtMYlFKR3FCMTZhZWpRcnQwQ2dZQVZaS0k5RXk5TUd2WEZJdnlzdW1JcFNuaE9aT1hqYzJ5VGxYYnoKREZ2Z3p2a0FZbnQvNldnNXBrU3BLdTZNcTJBRWFiSXhtV1JJZmowdmxmc1BDc2xudHlDNlVKcUxEZCtQYXNTdAovb01UblVoZkNUdUptcWNtV1l4dzJHS0RJd2VQRmcrSTE1VkxlOG41TERoVGJzVXQrOW1ZOFI4MzZmYnJkT0JGCjlLUC8wUUtCZ0d3Wkp1bmsxL2t2NnpQU25iaVBPVUczc0F1eU1ydjNQSi9DSU0wNDdZYmJxMUJJa0QrOG5DSEkKOHNLNHFCVEMvQ08yc2s1bWF0azcvT205UW9iY2ovZ2dMcjlQc1phZ0JNeUc2cXFadExvTjFqeXZLYXJqT0E2bQpiS2pOcERKZFV1ckkxMXQvVjFIdU8wck9zWHdqcXZrMXh6N1VJK0JpZG9YbC93cFVRTlVjCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
    admin_cert: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURFekNDQWZ1Z0F3SUJBZ0lJRHNTSnFJSE5YZXd3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TURFd01Ea3hNekEwTXpkYUZ3MHlNVEV3TURreE16QTBORFJhTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXB2ZVcwM1lmUTBCeml2YysKRm5qRXdOT3FZWGhYb2taZExUc1FzL0pydHBPYUhhQVl6K2QwMkZtWTErQjJpczZIeXNKcDh1dW9LSTJFZ3phNQp1SWN5a3hCaWhpTGE0b0Z0VEQyOFJnYUw3UFhEMnJ2alppMHVwazFKMnRJL0ZhNlZGaXVWNlFMM3BJd3ZDZUhoCmFySUpXaVdYa0RmM1VoQ2RMa01LVUpYbGZ6ak9hcjcwNzNhTFFpTmg4eHB5MGw4bWR0VitYTUhxbWxEY3QwRUwKVFdJUXhJcDgxQWRLWmgrRG5ialpMcHlMUUk0aDdFRTdnRmNUVjc3N2dvbHlFdi9PZnY2L0tCaDg0TW15TDNoWgpGS3crQ0pFV1FkQUYrQXY0ZEVaL201QkRpZ0FOV0IvZTkvZzUyZnlGY1dmUmxEMHV2U09oWjJVM24veGlNZkRsCmFxM2RLd0lEQVFBQm8wZ3dSakFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0h3WURWUjBqQkJnd0ZvQVVZdHNUL2U0Q0YxeFQvWkJ6MVlTWnV5RkcrQ2d3RFFZSktvWklodmNOQVFFTApCUUFEZ2dFQkFIWXRBQUhLaG9HWlF2TnBHYUh6YjY4bUFFcVhxbXpMT2hqT3lueHlxMnY0Z0h3VHgzMGJWRDM0CnF5M24yT0k1eHgyc3BQNEdEVndRcU1YUHNqSHIyMXQrVVFiZ3graGx1SWRoV3dXSEh4S3VJbzlsR0ZxbkVsZVMKelJyZlg0VnNMQ25nbHpSalNYZDREQkhGQnc4SkpzRW16NXFNUEEyUmlVNi9tVXVHZEFXU0VWWDRXcVJ6MTh2OQpDYWR5RGhuT05neEVIa3BQMnpKdnljYmlPdXZITGY3MGh3MmxKanlCd3BLR1BVeWMxWWRJaExLZUdja05EVk5CClFzenM2blZMcC9RVC9Lay9ndlUyNHVzS1RtMGxpSHp2TFpJc2prUWtVbzNnMFcyUWlLc2d6R2YyTVc5cE94emkKSmJCSWVtRXV0YUlKM0t3UHlGd3ViTVVPTHRhMmh1OD0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
    namespace: whatsapp-shared
    tillerless: true
    tillerless_silent: true
- name: whats-app-api-github
  type: git
  icon: github
  source:
    uri: https://github.com/chalkan3/MyGolangApiTemplate
- name: gopher-sync-github
  type: git
  icon: github
  source:
    uri: https://github.com/chalkan3/worker-sync
- name: gopher-process-github
  type: git
  icon: github
  source:
    uri: https://github.com/chalkan3/GopherCompany

jobs:
- name: deploy-gopher-company
  plan:
  - get: whats-app-api-github
  - get: gopher-sync-github
  - get: gopher-process-github
  - put: helm 
    params:
      repository: whats-app-api-github
      release: gopher-company-api
      namespace: gopher-company-api
      chart:  whats-app-api-github/gopherapichart/charts/gopher-rest-0.1.0.tgz
  - put: helm 
    params:
      repository: gopher-sync-github
      release: sync
      namespace: gopher-company-workers
      chart:  gopher-sync-github/gophersync/charts/gopher-worker-sync-0.1.0.tgz
  - put: helm 
    params:
      repository: gopher-process-github
      release: process
      namespace: gopher-company-workers
      chart:  gopher-process-github/processworker/charts/gopher-worker-process-0.1.0.tgz



